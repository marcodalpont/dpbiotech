<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DP Biotech — License Check</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root { 
    --bg:#ffffff; 
    --text:#0a0a0a; 
    --muted:#525252; 
    --line:#e5e5e5; 
    --card:#ffffff; 
    --b2:#7c3aed; 
  }
  @media (prefers-color-scheme: dark){ 
    :root { 
      --bg:#0a0a0a; 
      --text:#fafafa; 
      --muted:#a1a1aa; 
      --line:#262626;
      --card:#18181b; 
    } 
  }
  body {
    margin: 0;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    overflow: hidden; 
  }
  .container{max-width:1200px; margin:0 auto; padding:0 20px}
  .main-card, .payments-card {
    background-color: var(--card);
    border: 1px solid var(--line);
    border-radius: 20px;
    padding: 2.5rem;
    max-width: 500px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  }
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    border-radius: 999px;
    border: 1px solid transparent;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.2s ease, opacity 0.2s ease;
  }
  .btn.primary { background: var(--text); color: var(--bg); }
  .btn.primary:hover { opacity: 0.9; }
  .btn:disabled { opacity: 0.5; cursor: not-allowed; }
  .input {
    width: 100%;
    padding: 12px;
    border: 1px solid var(--line);
    border-radius: 12px;
    background-color: var(--card);
    color: var(--text);
    font-size: 16px;
  }
  .input:focus {
    outline: none;
    border-color: var(--b2);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--b2) 25%, transparent);
  }
  .success { color: #22c55e; }
  .expired { color: #ef4444; }
  .not-found, .not-active { color: #f97316; }
  .nav{position:sticky; top:0; z-index:50; background:color-mix(in srgb, var(--bg) 80%, transparent); backdrop-filter:saturate(180%) blur(10px); border-bottom:1px solid var(--line)}
  .nav-inner{max-width:1200px; margin:0 auto; padding:0 20px; height:57px; display:flex; align-items:center; justify-content:space-between}
  .logo{display:flex; gap:8px; align-items:center; font-weight:600; font-size: 18px;}
  .nav a{color:inherit; text-decoration:none}
  .payments-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid var(--line);
  }
  .payments-list li:last-child { border-bottom: none; }
</style>
</head>
<body>
  <div class="nav" id="main-nav">
    <div class="nav-inner">
      <a href="index.html" class="logo">
        <img src="logo.png" alt="DP Biotech Logo" style="height:34px; border-radius:50%;">
        <span>DP Biotech</span>
      </a>
      <a class="btn" href="licensing.html" style="border:1px solid var(--line)">Licensing</a>
    </div>
  </div>
  
  <div class="flex flex-col md:flex-row items-center justify-center md:gap-8 min-h-screen px-5">
    <div class="main-card mb-8 md:mb-0">
      <div class="flex items-center gap-2 mb-4">
        <img src="logo.png" alt="DP Biotech Logo" class="h-10 rounded-full" />
        <h1 class="text-2xl font-bold tracking-tight">License Check</h1>
      </div>
      <p class="text-gray-500 mb-6 text-sm">Please enter your microscope's serial number to check its licensing status and expiration date.</p>
      <div id="status-display" class="mb-6 hidden">
        <p id="message" class="text-lg font-semibold mb-2"></p>
        <p id="details" class="text-sm text-gray-400"></p>
      </div>
      <form id="licenseForm">
        <div class="mb-4">
          <label for="serialNumber" class="block text-sm font-medium mb-2">Serial Number</label>
          <input type="text" id="serialNumber" name="serialNumber" placeholder="Enter serial number..." class="input" required />
        </div>
        <button type="submit" class="btn primary w-full">Check License</button>
      </form>
      <div id="payment-section" class="mt-6 hidden">
        <div class="border-t border-line pt-6">
          <p id="payment-message" class="text-sm font-medium mb-2"></p>
          <p class="text-sm text-gray-500 mb-4">Continue to the next page to complete your transaction.</p>
          <button id="payButton" class="btn primary w-full"></button>
        </div>
      </div>
    </div>
    
    <div id="payments-history" class="payments-card hidden">
      <h2 class="text-xl font-bold tracking-tight mb-4">Previous Payments</h2>
      <p class="text-gray-500 text-sm mb-6">A record of your previous license transactions.</p>
      <ul id="payments-list" class="payments-list"></ul>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const licenseDatabase = {
    'DP123456': { 
      status: 'valid', 
      expires: '2026-12-31', 
      activeFeatures: ['3d-models', 'parallax', 'image-addition', 'ndi'],
      payments: [
        { date: '2023-12-31', amount: '€49.99', receiptId: 'REC-12345' },
        { date: '2022-12-31', amount: '€49.99', receiptId: 'REC-67890' }
      ]
    },
    'DP654321': { 
      status: 'expired', 
      expires: '2024-03-15', 
      activeFeatures: ['parallax', 'ndi'],
      payments: [
        { date: '2023-03-15', amount: '€49.99', receiptId: 'REC-54321' },
      ]
    },
    'DP000000': { 
      status: 'not-active', 
      expires: null,
      activeFeatures: [],
      payments: []
    }
  };

  const form = document.getElementById('licenseForm');
  const serialInput = document.getElementById('serialNumber');
  const statusDisplay = document.getElementById('status-display');
  const messageEl = document.getElementById('message');
  const detailsEl = document.getElementById('details');
  const paymentSection = document.getElementById('payment-section');
  const payButton = document.getElementById('payButton');
  const paymentMessageEl = document.getElementById('payment-message');
  const paymentsHistoryCard = document.getElementById('payments-history');
  const paymentsListEl = document.getElementById('payments-list');

  function displayStatus(status, details, license) {
    paymentsHistoryCard.classList.add('hidden');
    paymentSection.classList.add('hidden');
    statusDisplay.classList.remove('hidden');

    messageEl.textContent = status;
    detailsEl.textContent = details;
    messageEl.className = 'text-lg font-semibold mb-2';

    if (status.includes('Valid')) {
      messageEl.classList.add('success');
    } else if (status.includes('Expired')) {
      messageEl.classList.add('expired');
      paymentSection.classList.remove('hidden');
      paymentMessageEl.textContent = 'License expired.';
      payButton.textContent = 'Renew or Upgrade License';
    } else if (status.includes('Not Active')) {
      messageEl.classList.add('not-active');
      paymentSection.classList.remove('hidden');
      paymentMessageEl.textContent = 'A license is not active for this serial number.';
      payButton.textContent = 'Activate License';
    } else {
      messageEl.classList.add('not-found');
    }

    const payments = license ? license.payments : [];
    if (payments && payments.length > 0) {
      paymentsHistoryCard.classList.remove('hidden');
      paymentsListEl.innerHTML = '';
      payments.forEach(payment => {
        const li = document.createElement('li');
        li.innerHTML = `
          <div>
            <span class="font-medium">${payment.date}</span>
            <p class="text-sm text-gray-400">${payment.amount}</p>
          </div>
          <button class="btn text-sm font-normal" onclick="alert('Downloading receipt for ${payment.receiptId}...')">Download Receipt</button>
        `;
        paymentsListEl.appendChild(li);
      });
    }
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const serial = serialInput.value.toUpperCase().trim();
    const licenseInfo = licenseDatabase[serial];

    if (licenseInfo) {
      if (licenseInfo.status === 'valid') {
        displayStatus('License is Valid', `Expires on: ${licenseInfo.expires}`, licenseInfo);
      } else if (licenseInfo.status === 'expired') {
        displayStatus('License has Expired', `Expired on: ${licenseInfo.expires}`, licenseInfo);
      } else if (licenseInfo.status === 'not-active') {
         displayStatus('License Not Active', 'This serial number is ready for a new license.', licenseInfo);
      }
    } else {
      displayStatus('License Not Found', 'The serial number you entered was not found.');
    }
  });
  
  payButton.addEventListener('click', () => {
    const serial = serialInput.value.toUpperCase().trim();
    if (serial && licenseDatabase[serial]) {
      window.location.href = `license-purchase.html?serial=${serial}`;
    } else {
      alert('Please enter a valid serial number first.');
    }
  });
});
</script>
</body>
</html>