<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DP Pro — Digital Surgical Microscope</title>
<meta name="description" content="Revolutionary digital surgical microscope with gimbal stabilizer and articulated arm. Perfect stabilization, precise control, and AI integration for surgical excellence." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
<style>
:root {
--bg: #ffffff;
--text: #0a0a0a;
--muted: #525252;
--line: #e5e5e5;
--card: #ffffff;
--a1: #2563eb;
--a2: #059669;
--a3: #7c3aed;
}
@media (prefers-color-scheme: dark){
:root {
--bg: #0a0a0a;
--text: #fafafa;
--muted: #a1a1aa;
--line: #262626;
--card: #18181b;
}
}
html { scroll-snap-type: y mandatory; scroll-behavior: smooth; }
@media(max-width:768px) {
  html { scroll-snap-type: none; }
}

body{
margin:0;
font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
color:var(--text);
overflow-x: hidden;
background: linear-gradient(180deg, #d8e3ff 0%, #a7ccfc 50%, var(--bg) 100%);
-webkit-overflow-scrolling: touch;
}
.container{max-width:1200px; margin:0 auto; padding:0 20px}

/* ==== SPLASH SCREEN STYLES ==== */
.splash-screen {
position: fixed; top: 0; left: 0; width: 100%; height: 100%;
background: var(--bg); display: grid; place-items: center; z-index: 1000;
transition: opacity 0.8s ease-out; pointer-events: none;
}
.splash-screen.hidden { opacity: 0; }
.splash-text {
font-size: clamp(60px, 15vw, 200px); font-weight: 800; letter-spacing: -0.04em;
animation: fadeInScale 1.5s cubic-bezier(0.215, 0.610, 0.355, 1) forwards;
}
@keyframes fadeInScale { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

/* ==== NAVIGATION ==== */
.nav{position:sticky; top:0; z-index:50; background:color-mix(in srgb, var(--bg) 80%, transparent); backdrop-filter:saturate(180%) blur(10px); border-bottom:1px solid var(--line)}
.nav-inner{height:57px; display:flex; align-items:center; justify-content:space-between}
.logo{display:flex; gap:8px; align-items:center; font-weight:600; letter-spacing:-0.02em; font-size: 18px;}
.nav a{color:inherit; text-decoration:none}
/* Desktop navigation */
.nav-links{display:none; gap:24px; font-size:14px; color:var(--muted); list-style:none; margin:0; padding:0; height:100%}
@media(min-width:960px){.nav-links{display:flex; align-items:center}}
.nav-links > li { height: 100%; display: flex; align-items: center; cursor:pointer; }
.dropdown-menu { opacity: 0; visibility: hidden; transition: opacity .3s ease, visibility .3s ease; position: absolute; top: 57px; left: 0; right: 0; background: var(--bg); border-top: 1px solid var(--line); box-shadow: 0 20px 60px rgba(0,0,0,.15); z-index: 40; overflow-y: auto; max-height: calc(100vh - 57px); }
.dropdown-menu.is-open { opacity: 1; visibility: visible; }
.menu-content { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 32px; padding: 32px 0; }
.menu-main-links { list-style: none; padding: 0; margin: 0; }
.menu-main-links li:first-child { font-size: 11px; text-transform: uppercase; letter-spacing: .05em; color: var(--muted); margin-bottom: 8px; padding: 0 12px; }
.menu-main-links a { font-size: 24px; font-weight: 600; line-height: 1.5; display: block; padding: 4px 12px; border-radius: 6px; }
.menu-main-links a:hover { background: var(--card); }
.menu-link-column { list-style: none; padding: 0; margin: 0; }
.menu-link-column li:first-child { font-size: 11px; text-transform: uppercase; letter-spacing: .05em; color: var(--muted); margin-bottom: 14px; padding: 0 12px; }
.menu-link-column a { font-size: 13px; font-weight: 500; display: block; padding: 8px 12px; border-radius: 6px; }
.menu-link-column a:hover { background: var(--card); }
.menu-backdrop { position: fixed; top: 57px; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); z-index: 30; opacity: 0; visibility: hidden; transition: opacity .3s ease, visibility .3s ease; }
.menu-backdrop.is-visible { opacity: 1; visibility: visible; }

/* Mobile hamburger menu - EXACTLY AS DP MINI */
.hamburger-btn { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 32px; height: 32px; background: none; border: none; cursor: pointer; position: relative; z-index: 60; }
@media(min-width:960px) { .hamburger-btn { display: none; } }
.hamburger-line { width: 22px; height: 2px; background: var(--text); margin: 2px 0; transition: 0.3s ease; border-radius: 2px; }
.hamburger-btn.is-open .hamburger-line:nth-child(1) { transform: rotate(-45deg) translate(-5px, 6px); }
.hamburger-btn.is-open .hamburger-line:nth-child(2) { opacity: 0; }
.hamburger-btn.is-open .hamburger-line:nth-child(3) { transform: rotate(45deg) translate(-5px, -6px); }
/* Mobile menu overlay */
.mobile-menu { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--bg); z-index: 55; transform: translateX(-100%); transition: transform 0.3s ease; overflow-y: auto; padding: 80px 20px 40px; box-sizing: border-box; }
.mobile-menu.is-open { transform: translateX(0); }
.mobile-menu-section { margin-bottom: 32px; }
.mobile-menu-title {
  font-size: 19px;
  font-weight: 900;
  color: rgb(39, 39, 150); /* THIS IS THE CORRECT COLOR */
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 16px;
  padding: 0 4px;
}.mobile-menu-links { list-style: none; padding: 0; margin: 0; }
.mobile-menu-links a { display: block; padding: 16px 4px; font-size: 16px; font-weight: 500; color: var(--text); text-decoration: none; border-bottom: 1px solid var(--line); transition: color 0.2s ease; }
.mobile-menu-links a:hover { color: var(--a2); }
.mobile-menu-cta { margin-top: 32px; padding-bottom: 50px; }
@media(min-width:960px) { .mobile-menu { display: none; } }


.btn{display:inline-flex; align-items:center; gap:8px; padding:12px 0px; border-radius:999px; border:1px solid var(--line); font-weight:600; font-size:16px; background:transparent; color:inherit; cursor:pointer; text-decoration: none;}
.btn.primary{background:var(--text); color:var(--bg); border-color:transparent}
.btn.primary:hover{opacity:.92}
.btn:hover{background:color-mix(in srgb, var(--text) 6%, transparent)}
a.btn, button.btn { text-decoration: none !important; }
.nav .btn { padding: 10px 16px; font-size: 14px; }

/* Control visibility of desktop vs mobile nav buttons */
.desktop-only-btn { display: none; }
@media(min-width:960px) {
    .desktop-only-btn { display: inline-flex; }
}

.h1{font-size:clamp(40px, 7vw, 80px); line-height:1.05; letter-spacing:-0.03em; font-weight:800; margin:18px 0}
.grad{background:linear-gradient(90deg, var(--a1), var(--a2), var(--a3)); -webkit-background-clip:text; background-clip:text; color:transparent}
.lead{max-width:760px; color:var(--muted); font-size:clamp(16px, 2.5vw, 20px); line-height: 1.5;}
.hero-cta{display:flex; gap:12px; margin-top:24px; flex-wrap: wrap;}
@media(max-width:640px) {
  .hero-cta { flex-direction: column; align-items: center; gap: 16px; }
  .hero-cta .btn { width: 100%; max-width: 280px; justify-content: center; }
}

/* ==== LAYOUT & SECTIONS ==== */
.snap-section { min-height: 100vh; display: flex; align-items: center; justify-content: center; scroll-snap-align: start; scroll-snap-stop: always; padding: 100px 0; box-sizing: border-box; }
@media(max-width:768px) {
  .snap-section { min-height: auto; scroll-snap-align: none; padding: 60px 0; }
}
.band{background: color-mix(in srgb, var(--bg) 50%, transparent);}
h2{font-size:clamp(28px, 4.5vw, 44px); letter-spacing:-0.02em}
h3{font-size:clamp(18px, 3vw, 20px); letter-spacing:-0.01em; margin-bottom: 4px; font-weight:600;}
h4{font-size:16px; margin-bottom:12px; color:var(--muted); text-transform:uppercase; letter-spacing:.05em;}
p.muted{color:var(--muted); line-height: 1.6;}
.grid-2{display:grid; gap:48px; grid-template-columns:1fr; align-items:center}
@media(min-width:960px){.grid-2{grid-template-columns:1fr 1fr}}
.grid-3{display:grid; gap:24px; grid-template-columns:1fr}
@media(min-width:640px){.grid-3{grid-template-columns:repeat(3,1fr)}}
.grid-4{display:grid; gap:24px; grid-template-columns:1fr}
@media(min-width:900px){.grid-4{grid-template-columns:repeat(4,1fr)}}

.card{border:1px solid var(--line); border-radius:16px; padding:24px; background:var(--card); transition:box-shadow .2s ease, transform .2s ease}
.card:hover{box-shadow:0 12px 40px rgba(0,0,0,.1); transform: translateY(-4px);}
.icon{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg, var(--a1), var(--a3));color:#fff;margin-bottom:12px}
.icon svg { width: 24px; height: 24px; stroke: currentColor; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }

/* Mobile hero layout */
.mobile-model-insert { display: none; margin: 20px auto; max-width: 100%; width: 100%; height: 300px; }
.desktop-model { display: block; }
@media(max-width:960px) {
  .mobile-model-insert { display: block; }
  .desktop-model { display: none; }
  .hero-grid > div:first-child { order: 1; }
  .hero-grid > div:last-child { order: 2; }
}

.product-visual { border: 1px solid var(--line); border-radius: 24px; aspect-ratio: 4/3; background: var(--card); padding: 0; touch-action: none; }
.spec-item { display: flex; align-items: flex-start; gap: 16px; margin-bottom: 32px; text-align: left; }
.spec-item:last-child { margin-bottom: 0; }
.spec-icon { flex-shrink: 0; width: 36px; height: 36px; background: color-mix(in srgb, var(--a1) 10%, transparent); border-radius: 8px; display: grid; place-items: center; }
.spec-icon svg { width: 20px; height: 20px; stroke: var(--a1); stroke-width: 2; }
.spec-content strong { display: block; margin-bottom: 4px; font-size: 17px; color: var(--text); }
.spec-content p { margin: 0; font-size: 15px; color: var(--muted); line-height: 1.6; }

.animate-item { opacity: 0; transform: translateY(40px); transition: opacity 0.8s cubic-bezier(0.215, 0.610, 0.355, 1), transform 0.8s cubic-bezier(0.215, 0.610, 0.355, 1); }
.animate-item.is-visible { opacity: 1; transform: translateY(0); }
model-viewer { width: 100%; height: 100%; border-radius: 24px; --poster-color: transparent; }
model-viewer[camera-controls] { cursor: default; }

footer{border-top:1px solid var(--line); padding:36px 0; color:var(--muted); scroll-snap-align: end;}
@media(max-width:640px) {
  footer .container { flex-direction: column !important; text-align: center; gap: 16px !important; }
}
/* --- Cart Styles --- */
.cart-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 90; opacity: 0; visibility: hidden; transition: opacity .3s ease, visibility .3s ease; }
.cart-backdrop.is-visible { opacity: 1; visibility: visible; }
.cart-sidebar { position: fixed; top: 0; right: 0; width: 100%; max-width: 400px; height: 100%; background: var(--bg); border-left: 1px solid var(--line); z-index: 100; transform: translateX(100%); transition: transform .3s ease; display: flex; flex-direction: column; box-shadow: -10px 0 20px rgba(0,0,0,0.1); padding: 0; }
@media(max-width:480px) { .cart-sidebar { max-width: 100%; border-left: none; } }
.cart-sidebar.is-open { transform: translateX(0); }
.cart-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--line); padding: 1rem 2rem; flex-shrink: 0; }
.cart-items { list-style: none; padding: 1rem 2rem; margin: 0; flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 1rem; }
.cart-item { padding: 0; border-bottom: none; }
.cart-product-card { border: 1px solid var(--line); border-radius: 12px; padding: 16px; background: var(--card); box-shadow: 0 4px 10px rgba(0,0,0,0.05); position: relative; }
.cart-product-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.cart-product-title { font-size: 16px; font-weight: 600; margin: 0; }
.cart-product-subtitle { font-size: 13px; color: var(--muted); margin: 4px 0 12px 0; font-weight: 400; }
.cart-product-price { font-size: 15px; font-weight: 500; }
.cart-product-remove-btn { background: none; border: none; font-size: 24px; line-height: 1; padding: 0; margin-left: 10px; cursor: pointer; color: var(--muted); transition: color .2s ease; }
.cart-product-remove-btn:hover { color: var(--text); }
.cart-total { display: flex; justify-content: space-between; align-items: center; font-size: 18px; font-weight: 600; }
.cart-empty-state { text-align: center; padding: 2rem; color: var(--muted); margin: auto 0; }
.cart-footer { border-top: 1px solid var(--line); padding: 1rem 2rem 2rem 2rem; margin-top: auto; flex-shrink: 0; }
.quantity-control { display: flex; align-items: center; gap: 8px; }
.quantity-btn { width: 28px; height: 28px; border-radius: 6px; font-size: 18px; padding: 0; display: grid; place-items: center; line-height: 0; }
.quantity-input { width: 32px; height: 28px; text-align: center; border: 1px solid var(--line); border-radius: 6px; font-family: inherit; font-weight: 600; -moz-appearance: textfield; appearance: textfield; }
.quantity-input::-webkit-outer-spin-button, .quantity-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.cart-item-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; }

/* Gimbal Styles */
.gimbal-container { perspective: 800px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.gimbal-wrapper { position: relative; width: 200px; height: 200px; transform-style: preserve-3d; transform: rotateX(0deg) rotateY(0deg); }
.gimbal-ring { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotateY(0deg); border: 3px solid; border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0.8; }
.roll-ring { width: 200px; height: 200px; border-color: var(--a1); animation: rotate-roll 8s linear infinite; }
.pitch-ring { width: 150px; height: 150px; border-color: var(--a2); animation: rotate-pitch 8s linear infinite; }
.yaw-ring { width: 100px; height: 100px; border-color: var(--a3); animation: rotate-yaw 8s linear infinite; }
.gimbal-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: linear-gradient(135deg, var(--a1), var(--a3)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 12px; }
@keyframes rotate-roll { from { transform: translate(-50%, -50%) rotateZ(0deg); } to { transform: translate(-50%, -50%) rotateZ(360deg); } }
@keyframes rotate-pitch { from { transform: translate(-50%, -50%) rotateX(0deg); } to { transform: translate(-50%, -50%) rotateX(360deg); } }
@keyframes rotate-yaw { from { transform: translate(-50%, -50%) rotateY(0deg); } to { transform: translate(-50%, -50%) rotateY(360deg); } }

@media(max-width: 480px) {
  .gimbal-wrapper { width: 160px; height: 160px; }
  .roll-ring { width: 160px; height: 160px; }
  .pitch-ring { width: 120px; height: 120px; }
  .yaw-ring { width: 80px; height: 80px; }
  .gimbal-center { width: 50px; height: 50px; font-size: 10px; }
}
/* Style for larger, primary call-to-action buttons */
.hero-cta .btn {
    padding: 14px 28px;
    font-size: 16px;
}

/* --- START: Companion App Section --- */
.feature-checklist { list-style: none; padding: 0; margin: 24px 0 0 0; }
.feature-checklist li { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px; color: var(--muted); }
.feature-checklist svg { width: 20px; height: 20px; margin-top: 2px; flex-shrink: 0; color: var(--a1); }
.parallax-demo-container { padding: 20px; border: 1px solid var(--line); border-radius: 24px; background: var(--card); display: flex; flex-direction: column; gap: 16px; transition: background-color 0.8s; }
.parallax-label { text-align: center; font-size: 14px; font-weight: 700; color: var(--muted); background: var(--card); padding: 8px 16px; border-radius: 999px; border: 1px solid var(--line); margin: 0 auto 8px auto; }
.distance-controls { display: flex; gap: 8px; align-items: center; justify-content: center; width: 100%; }
.distance-btn { padding: 10px 16px; border:1px solid var(--line); border-radius:22px; background:var(--card); cursor:pointer; font-size:13px; font-weight:600; transition:.25s; color:var(--text); flex:1; }
.distance-btn:hover { background: color-mix(in srgb, var(--text) 6%, transparent); }
.distance-btn.active { background: var(--a1); color: #fff; border-color: var(--a1); transform: translateY(-1px); box-shadow: 0 6px 16px rgba(37, 99, 235, .25) }
#parallax-display { width: 100%; }
.depth-scene { position: relative; width: 100%; height: 260px; border: 1px solid var(--line); border-radius: 20px; background: var(--card); overflow: hidden; perspective: 900px; }
.depth-bg { position: absolute; inset: 0; background: linear-gradient(180deg, #eef3ff, var(--bg)); }
.depth-bg .grid { position: absolute; inset: 0; background-image: linear-gradient(to right, rgba(0, 0, 0, .05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0, 0, 0, .05) 1px, transparent 1px); background-size: 26px 26px; transform: translateZ(-120px) scale(1.08); transform-style: preserve-3d; opacity: .7; }
.subject { position: absolute; top: 50%; left: 50%; transform-style: preserve-3d; transition: transform .8s cubic-bezier(.4, 0, .2, 1), opacity .8s; will-change: transform, opacity; }
.subject-body { width: 120px; height: 120px; border-radius: 50%; background: radial-gradient(closest-side, #ffffff, #e9eefc); border: 1px solid var(--line); box-shadow: 0 18px 45px rgba(0, 0, 0, .16); position: relative; }
.lens-gloss { position: absolute; inset: 0; border-radius: 50%; background: radial-gradient(120px 80px at 35% 30%, rgba(255, 255, 255, .95), rgba(255, 255, 255, 0) 62%), radial-gradient(80px 60px at 70% 70%, rgba(255, 255, 255, .25), rgba(255, 255, 255, 0) 60%); mix-blend-mode: screen; pointer-events: none; }
.subject-chip { position: absolute; left: 50%; top: -14px; transform: translate(-50%, -100%) translateZ(1px); font-size: 12px; font-weight: 700; color: var(--muted); background: var(--card); border: 1px solid var(--line); padding: 6px 10px; border-radius: 999px; box-shadow: 0 6px 14px rgba(0, 0, 0, .06); white-space: nowrap; }
.parallax-demo-container.parallax-near .subject { transform: translate(-50%, -50%) translateZ(120px) scale(1.18); opacity: 1; }
.parallax-demo-container.parallax-medium .subject { transform: translate(-50%, -50%) translateZ(0px) scale(1.00); opacity: .95; }
.parallax-demo-container.parallax-far .subject { transform: translate(-50%, -50%) translateZ(-140px) scale(.82); opacity: .85; }
.subject-body::after { content: ""; position: absolute; left: 50%; top: 100%; width: 90%; height: 22px; transform: translate(-50%, -30%) rotateX(75deg); border-radius: 50%; background: #000; filter: blur(14px); opacity: .16; transition: opacity .8s; }
.parallax-demo-container.parallax-near .subject-body::after { opacity: .25; }
.parallax-demo-container.parallax-medium .subject-body::after { opacity: .18; }
.parallax-demo-container.parallax-far .subject-body::after { opacity: .10; }
@media (prefers-reduced-motion: reduce) { .subject { transition: none; } }
/* Parallax Adjustment Styles */
.parallax-header {
  display: flex;
  flex-direction: column; /* This makes items stack vertically */
  gap: 12px;
  align-items: center;
  justify-content: center;
}
.eye-view-container { display: flex; gap: 40px; }
.eye-view { width: 90px; height: 65px; border: 2px solid var(--a1); border-radius: 12px; background: var(--card); position: relative; overflow: hidden; box-shadow: 0 4px 16px rgba(37, 99, 235, 0.15); }
.eye-view::before { content: ''; position: absolute; top: 8px; left: 8px; right: 8px; bottom: 8px; border: 1px solid var(--line); border-radius: 8px; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); }
.eye-view.left::after { content: 'L'; position: absolute; top: 6px; left: 8px; font-size: 12px; font-weight: 700; color: var(--a1); z-index: 2; }
.eye-view.right::after { content: 'R'; position: absolute; top: 6px; right: 8px; font-size: 12px; font-weight: 700; color: var(--a1); z-index: 2; }
.parallax-indicator { position: absolute; top: 50%; width: 16px; height: 16px; background: var(--a1); border-radius: 50%; z-index: 3; border: 2px solid white; box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3); transition: all 0.8s cubic-bezier(.4, 0, .2, 1); }
.parallax-demo-container.parallax-near .eye-view.left .parallax-indicator { left: 55px; transform: translateY(-50%); }
.parallax-demo-container.parallax-near .eye-view.right .parallax-indicator { right: 55px; transform: translateY(-50%); }
.parallax-demo-container.parallax-medium .eye-view.left .parallax-indicator { left: 50%; transform: translate(-50%, -50%); }
.parallax-demo-container.parallax-medium .eye-view.right .parallax-indicator { right: 50%; transform: translate(50%, -50%); }
.parallax-demo-container.parallax-far .eye-view.left .parallax-indicator { left: 20px; transform: translateY(-50%); }
.parallax-demo-container.parallax-far .eye-view.right .parallax-indicator { right: 20px; transform: translateY(-50%); }
@media (max-width: 960px) {
  .parallax-header {
    justify-content: space-between;
      display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0;
  }
  .eye-view-container { display: flex; gap: 10px; }
}
/* --- FIXES FOR MOBILE PARALLAX DEMO --- */
@media(max-width: 960px) {
    #macos-app .grid-2 > div:first-child { order: 1; }
    #macos-app .grid-2 > div:last-child { order: 2; }
    .parallax-wrapper-mobile { margin-bottom: 24px; padding: 0 15px;}
}
@media(max-width: 480px) {
  .depth-scene { height: 220px; }
  .subject-body { width: 100px; height: 100px; }
  .eye-view { width: 70px; height: 50px; }
  .parallax-indicator { width: 12px; height: 12px; }
  .parallax-demo-container.parallax-near .eye-view.left .parallax-indicator { left: 45px; }
  .parallax-demo-container.parallax-near .eye-view.right .parallax-indicator { right: 45px; }
  .parallax-demo-container.parallax-far .eye-view.left .parallax-indicator { left: 15px; }
  .parallax-demo-container.parallax-far .eye-view.right .parallax-indicator { right: 15px; }
  .distance-btn { padding: 8px 12px; font-size: 12px; }
}

</style>
</head>
<body>

<div class="splash-screen">
<div class="splash-text grad">DP PRO</div>
</div>

<div class="nav" id="main-nav">
<div class="container nav-inner">
    <a href="index.html" class="logo">
        <img src="logo.png" alt="DP Biotech Logo" style="height:34px; border-radius:50%;">
        <span>DP Biotech</span>
    </a>

    <ul class="nav-links">
        <li class="dropdown" data-menu="microscopes-menu"><a href="#">Microscopes</a></li>
        <li class="dropdown" data-menu="stands-menu"><a href="#">Stands</a></li>
        <li class="dropdown" data-menu="software-menu"><a href="#">Software</a></li>
        <li class="dropdown" data-menu="support-menu"><a href="#">Support</a></li>
    </ul>

    <div style="display:flex; gap:8px; align-items:center;">
        <a class="btn nav-btn desktop-only-btn" href="licensing.html">Licensing</a>
        <button id="hamburger-btn" class="hamburger-btn">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
        </button>

        <button id="cart-btn" class="btn nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            <span id="cart-count">0</span>
        </button>

        
    </div>
</div>

<div id="microscopes-menu" class="dropdown-menu"><div class="container"><div class="menu-content"><ul class="menu-main-links"><li>Shop Microscopes</li><li><a href="DPMini.html">DP Mini</a></li><li><a href="DPPro.html">DP Pro</a></li><li><a href="all-models.html">All Models</a></li></ul><ul class="menu-link-column"><li>Quick Links</li><li><a href="#">Compare Models</a></li></ul></div></div></div>
<div id="stands-menu" class="dropdown-menu"><div class="container"><div class="menu-content"><ul class="menu-main-links"><li>Shop Stands</li><li><a href="#">Floor Stands</a></li><li><a href="#">Ceiling Mounts</a></li><li><a href="#">Wall Mounts</a></li></ul><ul class="menu-link-column"><li>Quick Links</li><li><a href="#">Compatibility Guide</a></li></ul></div></div></div>
<div id="software-menu" class="dropdown-menu"><div class="container"><div class="menu-content"><ul class="menu-main-links"><li>Explore Software</li><li><a href="#">Imaging Suite</a></li><li><a href="#">Companion App</a></li></ul><ul class="menu-link-column"><li>For Developers</li><li><a href="#">API & SDK</a></li></ul></div></div></div>
<div id="support-menu" class="dropdown-menu"><div class="container"><div class="menu-content"><ul class="menu-main-links"><li>Get Support</li><li><a href="contactus.html">Contact Us</a></li></ul></div></div></div>
</div>
<div class="menu-backdrop"></div>

<div class="mobile-menu" id="mobile-menu">
    <div class="mobile-menu-section">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div class="mobile-menu-title">Microscopes</div>
            <button id="close-mobile-menu" style="background: none; border: none; font-size: 30px; cursor: pointer; color: var(--text); padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">&times;</button>
        </div>
        <ul class="mobile-menu-links">
            <li><a href="DPMini.html">DP Mini</a></li>
            <li><a href="DPPro.html">DP Pro</a></li>
            <li><a href="all-models.html">All Models</a></li>
            <li><a href="#">Compare Models</a></li>
        </ul>
    </div>
    <div class="mobile-menu-section">
        <div class="mobile-menu-title">Stands</div>
        <ul class="mobile-menu-links">
            <li><a href="#">Floor Stands</a></li>
            <li><a href="#">Ceiling Mounts</a></li>
            <li><a href="#">Wall Mounts</a></li>
            <li><a href="#">Compatibility Guide</a></li>
        </ul>
    </div>
    <div class="mobile-menu-section">
        <div class="mobile-menu-title">Software</div>
        <ul class="mobile-menu-links">
            <li><a href="#">Imaging Suite</a></li>
            <li><a href="#">Companion App</a></li>
            <li><a href="#">API & SDK</a></li>
        </ul>
    </div>
    <div class="mobile-menu-section">
        <div class="mobile-menu-title">Support</div>
        <ul class="mobile-menu-links">
            <li><a href="contactus.html">Contact Us</a></li>
        </ul>
    </div>
    <div class="mobile-menu-cta">
        <a href="licensing.html" class="btn" style="width: 100%; justify-content: center; margin-bottom: 12px;">Licensing</a>
    </div>
</div>

<div class="cart-backdrop" id="cart-backdrop"></div>
<div class="cart-sidebar" id="cart-sidebar">
<div class="cart-header">
<h3 style="margin:0;">Your Cart</h3>
<button class="btn nav-btn" id="close-cart-btn">Close</button>
</div>
<div id="cart-empty-state" class="cart-empty-state">
Your cart is empty.
</div>
<ul class="cart-items" id="cart-items">
</ul>
<div class="cart-footer">
<div class="cart-total">
<span>Total</span>
<span id="cart-total-price">€0,00</span>
</div>
<button id="checkout-btn" class="btn primary" style="width:100%; margin-top:1rem;">Checkout</button>
<button id="clear-cart-btn" class="btn" style="width:100%; margin-top:0.5rem;">Clear Cart</button>
</div>
</div>
<header class="snap-section" id="home">
<div class="container">
<div class="grid-2 hero-grid" data-stagger-children>
<div class="animate-item">
<h1 class="h1">DP Pro <span class="grad">Surgical Microscope</span></h1>
<p class="lead">Revolutionary surgical microscope with gimbal stabilization and articulated arm for surgical excellence.</p>
<div class="product-visual animate-item mobile-model-insert">
    <model-viewer src="dppro.glb" ios-src="dppro.usdz" alt="DP Pro Surgical Microscope"
    camera-controls auto-rotate ar shadow-intensity="1" interaction-prompt="none"
    camera-orbit="15deg 75deg 1.5m">
    </model-viewer>
</div>
<div class="hero-cta">
<a href="buydppro.html" class="btn primary">Buy Now</a>
<a href="#gimbal" class="btn">Learn More</a>
</div>
</div>
<div class="product-visual animate-item desktop-model">
<model-viewer src="dppro.glb" ios-src="dppro.usdz" alt="DP Pro Surgical Microscope"
camera-controls auto-rotate ar shadow-intensity="1" interaction-prompt="none"
camera-orbit="15deg 75deg 1.5m">
</model-viewer>
</div>
</div>
</div>
</header>
<section class="snap-section band" id="specifications">
<div class="container animate-item">
<div style="text-align: center; max-width: 760px; margin: 0 auto 60px auto;">
<h2>Engineered for Excellence</h2>
<p class="muted">Every component is meticulously designed to enhance surgical workflow, providing unparalleled stability, optical clarity, and intelligent control.</p>
</div>
<div class="grid-2" style="gap: 60px; max-width:1000px; margin:0 auto; align-items: start;">
<div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="2"></circle><path d="M12 2a10 10 0 0 0-2.3.19M12 22a10 10 0 0 1-2.3-.19"></path><path d="M2 12a10 10 0 0 1 .19-2.3M22 12a10 10 0 0 0-.19-2.3"></path></svg></div>
<div class="spec-content">
<strong>3-Axis Gimbal Stabilization</strong>
<p>Eliminates vibrations and micro-tremors by isolating the optical body, ensuring an exceptionally stable image during repositioning.</p>
</div>
</div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M17 17l-1 1-1.5-1.5L13 18l-1-1 1.5-1.5L12 14l-1 1-1.5-1.5L8 15l-1-1 1.5-1.5L7 11l-1 1-1.5-1.5L3 12l-1-1 1.5-1.5L2 8l-1-1 1.5-1.5L1 4l1-1 1.5 1.5L5 3l1 1-1.5 1.5L6 7l1-1 1.5 1.5L10 6l1 1-1.5 1.5L11 9l1-1 1.5 1.5L15 8l1 1-1.5 1.5L16 11l-1 1 1.5 1.5L15 13l1 1-1.5 1.5L16 16z"></path><path d="M9 12a3 3 0 11-3-3"></path></svg></div>
<div class="spec-content">
<strong>Articulated Robotic Arm</strong>
<p>Provides extensive reach and effortless, precise positioning with smooth, counterbalanced mechanics for optimal ergonomics.</p>
</div>
</div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M14 10a2 2 0 10-4 0v4a2 2 0 104 0V5a2 2 0 10-4 0"></path><path d="M8 19.5a2.5 2.5 0 005 0"></path><path d="M6 17H4a2 2 0 01-2-2V7a2 2 0 012-2h2"></path><path d="M18 17h2a2 2 0 002-2V7a2 2 0 00-2-2h-2"></path></svg></div>
<div class="spec-content">
<strong>Multi-Modal Control</strong>
<p>Manage focus, zoom, and positioning via a multifunctional joystick, pressure-sensitive oculars, or an optional foot pedal.</p>
</div>
</div>
</div>
<div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="3"></circle><path d="M20.62 12.38a8.38 8.38 0 0 1-1.24 3.06c-1.63 2.62-4.04 4.31-7.38 4.31s-5.75-1.69-7.38-4.31A8.38 8.38 0 0 1 3.38 12.38a8.38 8.38 0 0 1 1.24-3.06c1.63-2.62 4.04-4.31 7.38-4.31s5.75 1.69 7.38 4.31a8.38 8.38 0 0 1 1.24 3.06z"></path></svg></div>
<div class="spec-content">
<strong>Apochromatic Optics</strong>
<p>Corrects for chromatic aberrations, delivering razor-sharp images with true-to-life color fidelity and exceptional depth perception.</p>
</div>
</div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M5 12h14M12 5l7 7-7 7"></path></svg></div>
<div class="spec-content">
<strong>Motorized 5-Step Zoom</strong>
<p>Offers a wide magnification range (e.g., 5x-25x) with a smooth, motorized transition between steps to maintain focus on the surgical field.</p>
</div>
</div>
<div class="spec-item">
<div class="spec-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M23 12.15c0 6.3-5.15 11.45-11.45 11.45A11.45 11.45 0 0 1 0 12.15C0 5.85 5.15.7 11.45.7A11.45 11.45 0 0 1 23 12.15z"></path><path d="M5.1 12.15h13.8"></path><path d="M12 5.25v13.8"></path></svg></div>
<div class="spec-content">
<strong>Coaxial LED Illumination</strong>
<p>Provides a bright, shadow-free field of view with excellent color rendering (CRI >90) for accurate tissue assessment.</p>
</div>
</div>
</div>
</div>
</section>
<section class="snap-section" id="gimbal">
<div class="container" data-stagger-children>
<div class="animate-item" style="text-align: center; max-width: 760px; margin: 0 auto 60px auto;">
<h2>Revolutionary 3-Axis Gimbal Stabilization</h2>
</div>
<div class="grid-2" style="gap: 60px; align-items: flex-start;">
<div class="animate-item">
<h3>How It Works</h3>
<p class="muted" style="margin-bottom: 32px;">Unlike traditional surgical microscopes where the entire system moves together, the DP Pro separates the optical body from the eyepieces using a sophisticated 3-axis gimbal system. This breakthrough design allows the camera head to move independently while maintaining perfect stability.</p>
<h4 style="text-transform: none; font-size: 16px; margin-bottom: 12px;">Key Benefits</h4>
<ul style="list-style: none; padding: 0; margin: 0; color: var(--muted);">
<li style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
<svg style="width: 20px; height: 20px; margin-top: 2px; flex-shrink: 0;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="var(--a1)">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
<span>Eliminates hand tremors and vibrations from affecting the image</span>
</li>
<li style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
<svg style="width: 20px; height: 20px; margin-top: 2px; flex-shrink: 0;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="var(--a1)">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
<span>Maintains focus on target area during repositioning</span>
</li>
<li style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
<svg style="width: 20px; height: 20px; margin-top: 2px; flex-shrink: 0;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="var(--a1)">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
<span>Allows fluid movement without compromising image quality</span>
</li>
<li style="display: flex; align-items: flex-start; gap: 12px;">
<svg style="width: 20px; height: 20px; margin-top: 2px; flex-shrink: 0;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="var(--a1)">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
</svg>
<span>Reduces surgeon fatigue through improved ergonomics</span>
</li>
</ul>
</div>
<div class="animate-item">
<div class="gimbal-container" style="margin-bottom: 32px;">
<div class="gimbal-wrapper">
<div class="gimbal-ring roll-ring"></div>
<div class="gimbal-ring pitch-ring"></div>
<div class="gimbal-ring yaw-ring"></div>
<div class="gimbal-center">OPTICS</div>
</div>
<div style="text-align: center; margin-top: 24px;">
<p style="font-size: 14px; color: var(--muted);">3-Axis Stabilization System</p>
<div style="display: flex; justify-content: center; gap: 24px; margin-top: 12px;">
<span style="font-size: 11px; font-weight: 600; color: var(--a1);">ROLL</span>
<span style="font-size: 11px; font-weight: 600; color: var(--a2);">PITCH</span>
<span style="font-size: 11px; font-weight: 600; color: var(--a3);">YAW</span>
</div>
</div>
</div>
</div>
</div>
</div>
</section>

<section class="snap-section" id="macos-app">
    <div class="container">
        <div class="grid-2" data-stagger-children>
            <div class="animate-item">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
                    <img src="logoappmac.png" alt="DP Pro Companion App Logo" style="width: 96px; height: 96px; border-radius: 22px; box-shadow: 0 8px 24px rgba(0,0,0,0.15);">
                    <h2>DP Pro Companion for macOS</h2>
                </div>
                <p class="muted">Bring the power of the DP Pro to your desktop. The macOS Companion App provides a comprehensive suite for pre-operative planning, live collaboration, and post-operative review.</p>
                <p class="muted">Experience true stereoscopic 3D on your Microscope. The Mac app uses the feed from the dual 4K cameras to create a perfectly matched 3D image, improving precision and minimizing eye fatigue during long procedures. </p>
                <ul class="feature-checklist">
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
                        <span>True stereoscopic 3D viewing on your monitor</span>
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
                        <span>Upload and overlay 3D files and images</span>
                    </li>
                    <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
                        <span>Live stream the surgical view for teaching or consultation</span>
                    </li>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" /></svg>
                        <span>NDI Screen Control & Streaming</span>
                    </li>
                </ul>
                <div class="parallax-wrapper-mobile">
                    <div class="animate-item" style="display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 16px; margin-top: 24px;">
                        <div class="parallax-demo-container" id="parallax-demo" style="width: 100%;">
                            <div class="parallax-header" style="margin-bottom: 16px;">
                                <div class="parallax-label">Parallax Adjustment</div>
                                <div class="eye-view-container">
                                    <div class="eye-view left"><div class="parallax-indicator"></div></div>
                                    <div class="eye-view right"><div class="parallax-indicator"></div></div>
                                </div>
                            </div>
                            <div id="parallax-display" class="parallax-medium">
                                <div class="depth-scene">
                                    <div class="depth-bg"><div class="grid"></div></div>
                                    <div class="subject">
                                        <div class="subject-chip">Microscope View</div>
                                        <div class="subject-body"><div class="lens-gloss"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="distance-controls" style="width: 100%;">
                            <button class="distance-btn" data-distance="near">Near</button>
                            <button class="distance-btn active" data-distance="medium">Medium</button>
                            <button class="distance-btn" data-distance="far">Far</button>
                        </div>
                    </div>
                </div>
                <div class="hero-cta" style="margin-top:24px;">
                    <a href="dppro-app.html" class="btn primary">Discover the App</a>
                </div>
            </div>
            <div class="animate-item desktop-parallax">
                 <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 16px;">
                    <div class="parallax-demo-container" id="parallax-demo-desktop" style="width: 100%;">
                        <div class="parallax-header" style="margin-bottom: 16px;">
                             <div class="parallax-label">Parallax Adjustment</div>
                             <div class="eye-view-container">
                                 <div class="eye-view left">
                                     <div class="parallax-indicator"></div>
                                 </div>
                                 <div class="eye-view right">
                                     <div class="parallax-indicator"></div>
                                 </div>
                             </div>
                        </div>
                        <div id="parallax-display-desktop" class="parallax-medium">
                            <div class="depth-scene">
                                <div class="depth-bg"><div class="grid"></div></div>
                                <div class="subject">
                                    <div class="subject-chip">Microscope View</div>
                                    <div class="subject-body">
                                        <div class="lens-gloss"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="distance-controls" style="width: 100%;">
                        <button class="distance-btn" data-distance="near">Near</button>
                        <button class="distance-btn active" data-distance="medium">Medium</button>
                        <button class="distance-btn" data-distance="far">Far</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<footer>
<div class="container" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
<div style="display:flex; gap:8px; align-items:center"><img src="logo.png" alt="DP Biotech Logo" style="height: 36px; border-radius: 50%;">DP Biotech</div>
<div style="display:flex; gap:18px"><a href="#" style="color:var(--muted); text-decoration:none;">Privacy</a><a href="#" style="color:var(--muted); text-decoration:none;">Terms</a><a href="#" style="color:var(--muted); text-decoration:none;">Patents</a></div>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
const body = document.body;

/* ==== Splash Screen and Animations ==== */
const splash = document.querySelector('.splash-screen');
window.addEventListener('load', () => {
    if (splash) {
        setTimeout(() => { splash.classList.add('hidden'); }, 800);
        setTimeout(() => { splash.remove(); }, 1600);
    }
});
const observerOptions = { rootMargin: '0px', threshold: 0.2 };
const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const el = entry.target;
            if (el.dataset.staggerChildren !== undefined) {
                const children = el.querySelectorAll('.animate-item');
                children.forEach((child, index) => {
                    child.style.transitionDelay = `${index * 120}ms`;
                    child.classList.add('is-visible');
                });
            } else {
                el.classList.add('is-visible');
            }
            observer.unobserve(el);
        }
    });
}, observerOptions);
document.querySelectorAll('.animate-item, [data-stagger-children]').forEach(item => observer.observe(item));

/* ==== Mobile Navigation Menu (EXACTLY AS DP MINI) ==== */
const hamburgerBtn = document.getElementById('hamburger-btn');
const mobileMenu = document.getElementById('mobile-menu');
const closeMobileMenuBtn = document.getElementById('close-mobile-menu');

if (hamburgerBtn && mobileMenu && closeMobileMenuBtn) {
    function closeMobileMenu() {
        hamburgerBtn.classList.remove('is-open');
        mobileMenu.classList.remove('is-open');
        body.style.overflow = '';
    }
    hamburgerBtn.addEventListener('click', () => {
        hamburgerBtn.classList.toggle('is-open');
        mobileMenu.classList.toggle('is-open');
        body.style.overflow = mobileMenu.classList.contains('is-open') ? 'hidden' : '';
    });
    
    closeMobileMenuBtn.addEventListener('click', closeMobileMenu);

    mobileMenu.addEventListener('click', (e) => {
        if (e.target.tagName === 'A' || e.target.closest('button')) {
            // Check if the clicked button is NOT the close button itself
            if(e.target.id !== 'close-mobile-menu' && !e.target.closest('#close-mobile-menu')) {
                 closeMobileMenu();
            }
        }
    });
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 960) {
            closeMobileMenu();
        }
    });
}

/* ==== Mega menu script ==== */
const mainNav = document.getElementById('main-nav');
if (mainNav) {
    const triggers = mainNav.querySelectorAll('.dropdown[data-menu]');
    const backdrop = document.querySelector('.menu-backdrop');
    let activeMenu = null, closeTimeout;
    function openMenu(id){
        if(activeMenu){ activeMenu.classList.remove('is-open'); }
        const menu = document.getElementById(id);
        if(menu){ menu.classList.add('is-open'); backdrop.classList.add('is-visible'); activeMenu = menu; }
    }
    function closeAll(){
        if(activeMenu){ activeMenu.classList.remove('is-open'); }
        backdrop.classList.remove('is-visible'); activeMenu = null;
    }
    triggers.forEach(t => t.addEventListener('mouseenter', () => { clearTimeout(closeTimeout); openMenu(t.dataset.menu); }));
    mainNav.addEventListener('mouseleave', () => { closeTimeout = setTimeout(closeAll, 200); });
    mainNav.addEventListener('mouseenter', () => { clearTimeout(closeTimeout); });
}

/* ==== Complete Cart Script ==== */
const cartBtn = document.getElementById('cart-btn');
const cartCountEl = document.getElementById('cart-count');
const cartSidebar = document.getElementById('cart-sidebar');
const cartBackdrop = document.getElementById('cart-backdrop');
const closeCartBtn = document.getElementById('close-cart-btn');
const cartItemsList = document.getElementById('cart-items');
const cartEmptyState = document.getElementById('cart-empty-state');
const cartTotalPriceEl = document.getElementById('cart-total-price');
const checkoutBtn = document.getElementById('checkout-btn');
const clearCartBtn = document.getElementById('clear-cart-btn');
let cart = [];

function openCart() {
    cartSidebar.classList.add('is-open');
    cartBackdrop.classList.add('is-visible');
    body.style.overflow = 'hidden';
}
function closeCart() {
    cartSidebar.classList.remove('is-open');
    cartBackdrop.classList.remove('is-visible');
    body.style.overflow = '';
}
function initCart() {
    const savedCart = sessionStorage.getItem('shoppingCart');
    if (savedCart) { cart = JSON.parse(savedCart); }
    updateCartUI();
}
function saveCart() {
    sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
    updateCartUI();
}
function formatOptions(options) {
    if (typeof options === 'object' && options !== null) { return Object.values(options).filter(val => val).join(', '); }
    return options || '';
}
function changeQuantity(itemId, amount) {
    if (amount > 0) {
        const itemToAdd = cart.find(item => item.id === itemId);
        if (itemToAdd) { cart.push({...itemToAdd}); }
    } else if (amount < 0) {
        const itemIndexToRemove = cart.findIndex(item => item.id === itemId);
        if (itemIndexToRemove > -1) { cart.splice(itemIndexToRemove, 1); }
    }
    saveCart();
}
function removeItem(itemId) {
    cart = cart.filter(item => item.id !== itemId);
    saveCart();
}
function updateCartUI() {
    const consolidatedCart = {};
    cart.forEach(item => {
        if (consolidatedCart[item.id]) { consolidatedCart[item.id].quantity++; } 
        else { consolidatedCart[item.id] = { ...item, quantity: 1 }; }
    });
    const displayCart = Object.values(consolidatedCart);
    cartItemsList.innerHTML = '';
    let total = 0;
    cart.forEach(item => { total += item.price; });
    const EUR = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' });
    if (displayCart.length === 0) {
        cartEmptyState.style.display = 'block';
        checkoutBtn.disabled = true;
        clearCartBtn.disabled = true;
    } else {
        cartEmptyState.style.display = 'none';
        checkoutBtn.disabled = false;
        clearCartBtn.disabled = false;
        displayCart.forEach((item) => {
            const li = document.createElement('li');
            li.className = 'cart-item';
            const baseName = item.name.split('(')[0].trim();
            const formattedOptions = formatOptions(item.options);
            li.innerHTML = `<div class="cart-product-card"><div class="cart-product-header"><h4 class="cart-product-title">${baseName}</h4><button class="cart-product-remove-btn" data-action="remove" data-id="${item.id}">&times;</button></div><p class="cart-product-subtitle">${formattedOptions}</p><div class="cart-item-actions"><div class="quantity-control"><button class="btn quantity-btn" data-action="decrease" data-id="${item.id}">-</button><input type="number" class="quantity-input" value="${item.quantity}" min="1" readonly><button class="btn quantity-btn" data-action="increase" data-id="${item.id}">+</button></div><div class="cart-product-price">${EUR.format(item.price)}</div></div></div>`;
            cartItemsList.appendChild(li);
        });
    }
    if (cartCountEl) cartCountEl.textContent = cart.length;
    if (cartTotalPriceEl) cartTotalPriceEl.textContent = EUR.format(total);
}
if (cartBtn) cartBtn.addEventListener('click', openCart);
if(closeCartBtn) closeCartBtn.addEventListener('click', closeCart);
if(cartBackdrop) cartBackdrop.addEventListener('click', closeCart);
if(cartItemsList) {
    cartItemsList.addEventListener('click', (e) => {
        const target = e.target.closest('button');
        if (!target) return;
        const action = target.dataset.action;
        const id = target.dataset.id;
        if (!id) return;
        if (action === 'increase') { changeQuantity(id, 1); } 
        else if (action === 'decrease') { changeQuantity(id, -1); } 
        else if (action === 'remove') { removeItem(id); }
    });
}
if(clearCartBtn) clearCartBtn.addEventListener('click', () => { cart = []; saveCart(); });
if(checkoutBtn) checkoutBtn.addEventListener('click', () => { window.location.href = 'checkout.html'; });
window.onbeforeunload = function(event) {
    if (cart.length > 0) {
        const message = "Your cart contains items. Are you sure you want to leave?";
        event.returnValue = message;
        return message;
    }
};
initCart();

/* --- Dynamic Parallax Demo Script --- */
function initializeParallax(containerId) {
    const parallaxDemo = document.getElementById(containerId);
    if (parallaxDemo) {
        const distanceButtons = parallaxDemo.parentElement.querySelectorAll('.distance-btn');
        const parallaxStates = ['near', 'medium', 'far'];
        let currentStateIndex = 1;
        let autoCycleInterval;

        function updateParallaxState(distance) {
            parallaxDemo.classList.remove('parallax-near', 'parallax-medium', 'parallax-far');
            parallaxDemo.classList.add(`parallax-${distance}`);
            distanceButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.distance === distance);
            });
        }
        function cycleStates() {
            currentStateIndex = (currentStateIndex + 1) % parallaxStates.length;
            updateParallaxState(parallaxStates[currentStateIndex]);
        }
        function startAutoCycle() {
            clearInterval(autoCycleInterval);
            autoCycleInterval = setInterval(cycleStates, 4000);
        }
        distanceButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const selectedDistance = btn.dataset.distance;
                currentStateIndex = parallaxStates.indexOf(selectedDistance);
                updateParallaxState(selectedDistance);
                clearInterval(autoCycleInterval);
                setTimeout(startAutoCycle, 8000);
            });
        });
        updateParallaxState('medium'); 
        startAutoCycle();
    }
}
initializeParallax('parallax-demo');
initializeParallax('parallax-demo-desktop');

// Hide desktop parallax on mobile and vice-versa
function handleParallaxVisibility() {
    const desktopParallax = document.querySelector('.desktop-parallax');
    const mobileParallax = document.querySelector('.parallax-wrapper-mobile');
    if (window.innerWidth >= 960) {
        if(desktopParallax) desktopParallax.style.display = 'block';
        if(mobileParallax) mobileParallax.style.display = 'none';
    } else {
        if(desktopParallax) desktopParallax.style.display = 'none';
        if(mobileParallax) mobileParallax.style.display = 'block';
    }
}
handleParallaxVisibility();
window.addEventListener('resize', handleParallaxVisibility);

});
</script>

</body>
</html>